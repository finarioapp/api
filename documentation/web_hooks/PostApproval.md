# Post-Approval Web Hook
After an investment is approved, Finario can send the investment's data to an API endpoint of your choosing.

* * *

## Set Up (in the Finario App)
An Administrator can set up Web Hooks at https://<your_host>.finario.com/web_hooks

The information required is as follows:
- End point (the url Finario will send the investment payload to after approval)
- Api key (if needed for your end point)
- Api secret (if needed for your end point)
- The conditions that should trigger the payload being sent. (Please note that these conditions will only be matched after an investment has been fully approved.)

You can also send test requests to the end point you set up from within the Finario app.

* * *

## All possible attributes returned
Name | Description | Format
---- | ------- | -----------
name | The investment's name | string
investment_id | The investment's id | string
investment_category_name | The investment's category's name | string
api_request | Will always be true - indicates that the payload was generated by an api request | boolean
organization_code |The organization's unique code | string
organization_name | The organization's name | string
costs_path | The investment's costs' api url | string
errors | Any errors returned during the request | array
custom_field_values | Pre-defined custom fields | hash
approved_at | When the investment was approved | time
approved_amount_base_currency_amount | The approved estimate in the investment's default currency | string
approved_amount_base_currency | The investment's default currency | string
approved_amount_org_currency_amount | The approved estimate in the organization's default currency | string
approved_amount_org_currency | The organization's default currency | string
as_of_date | Time when report was generated (will always be current time) | string
costs | Costs associated with the investment | array of cost hashes - see below for contents of cost hashes within array
project_start | The investment's project start date | array
estimated_completion_date | The investment's estimated completion date | array
investment_path | The investment's api url | string
owner | The investment owner's id | string
web_hook_user_fields | Custom list of users associated with the webhook | hash

* * *

## Breakdown of costs hash
Attributes of cost hash:

Name | Description | Format
---- | ------- | -----------
name | name of cost | string
account_name | account name | string
account_code | account code | string
cost_category | cost category name | string
vendor | vendor code | string
expected_units | cost data | hash - see below for contents

Attributes of expected units hash:

Name | Description | Format
---- | ------- | -----------
date | expected unit's entry date | array containing year, month
quantity | amount of costs that expected units describes | string
unit_cost | cost amount | hash with keys 'cents' and 'currency'

Example of cost hash:

```
    {
      "name": "First Cost",
      "account_name": "Account Name",
      "account_code": "Account Code",
      "cost_category": "Cost Category Name",
      "expected_units": [
        {
          "date": [
            2017,
            2
          ],
          "quantity": "1",
          "unit_cost": {
            "cents": 200000000,
            "currency": "USD"
          }
        },
        {
          "date": [
            2017,
            8
          ],
          "quantity": "1",
          "unit_cost": {
            "cents": 200000000,
            "currency": "USD"
          }
        }
      ],
      "vendor": "VENDOR-CODE"
    }
```

## Sample Payload

```
{
  "name": "Foo Investment",
  "investment_id": "933363",
  "investment_category_name": "Bar Category",
  "organization_code": "ABC123",
  "Custom Field 1 Name": "The Name 1",
  "Custom Field 2 Name": "The Name 2",
  "project_start": [
    2017,
    4
  ],
  "estimated_completion_date": [
    2017,
    9
  ],
  "costs": [
    {
      "name": "First Cost",
      "account_name": "Account Name",
      "account_code": "Account Code",
      "cost_category": "Cost Category Name",
      "expected_units": [
        {
          "date": [
            2017,
            2
          ],
          "quantity": "1",
          "unit_cost": {
            "cents": 200000000,
            "currency": "USD"
          }
        },
        {
          "date": [
            2017,
            8
          ],
          "quantity": "1",
          "unit_cost": {
            "cents": 200000000,
            "currency": "USD"
          }
        }
      ],
      "vendor": "VENDOR-CODE"
    }
  ]
}

```
